version: '3'
services:

  python:
    build:
      context: ./python
      dockerfile: Dockerfile
    command: pipenv run python3 main.py
    volumes:
      - ./python:/app

  go:
    build:
      context: ./go
      dockerfile: Dockerfile
    command: go run main.go
    volumes:
      - ./go:/app

  rust:
    build:
      context: ./rust
      dockerfile: Dockerfile
    command: cargo run
    volumes:
      - ./rust:/app

  ts:
    build:
      context: ./typescript
    container_name: mosa-ts
    volumes:
      - ./typescript:/opt/typescript
    command: npm run dev
    ports:
      - "3000:3000"

  ruby:
    build:
      context: ./ruby
      dockerfile: Dockerfile
    command: ruby /var/www/main.rb
    volumes:
      - ./ruby:/app

  cpp:
    build:
      context: ./cpp
      dockerfile: Dockerfile
    volumes:
      - ./cpp:/app
    command: bash -c ./main

  cs:
    build:
      context: ./cs
    container_name: mosa-cs
    volumes:
      - ./cs:/opt/cs
    ports:
      - 8080:8080

  r:
    build:
      context: ./R
      dockerfile: Dockerfile
    volumes:
      - ./R:/app
    command: Rscript ./script.R

  java:
    build:
      context: ./java
    container_name: mosa-java
    ports:
      - 8080:8080
    tty: true
    volumes:
      - ./java:/opt/java

  elixir:
    build:
        context: ./elixir
        dockerfile: Dockerfile
    container_name: mosa-elixir
    ports:
      - '8080:8080'
    command: mix phx.server
    tty: true
    environment:
      - MIX_ENV=dev
      - PORT=8080
    volumes:
      - ../:/app
    working_dir: /app/src